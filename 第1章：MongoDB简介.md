# 第1章：简介(Introduction)

## 1.1 MongoDB简介

MongoDB是一个强大、灵活、可扩展的通用数据库。

#### 易用性

MongoDB是一种面向文档的数据库，而不是关系型数据库。由于脱离了关系模型会使得数据库扩展变得更加容易，当然MongoDB还有非常多其他的优点。

面向文档的数据库使用更加灵活的“文档”取代关系型数据库中“行”。文档中允许嵌入其他文档和数组，这使得文档可以表达复杂层次的数据关系，也符合现代面向对象语言开发人员的思考使用数据方式。

由于不需要提前预定义数据库架构，可以灵活自由地添加删除字段，因此开发人员可以快速迭代，最终选择最合适的模型。



#### 扩展性

> 注意，这里说的扩展性不是指数据库字段的扩展，而是指数据库服务器的扩展

随着项目数据库的数据量不断扩大，都需要扩展服务器数量来提高访问性能。

MongoDB很容易进行横向扩展，MongoDB会自动处理数据平衡和集群数据管理，自动分发文档，将读写路由指向正确的服务器上。

|                         | :left_right_arrow: | 应用驱动程序(Application Drive) ... |
| ----------------------- | ------------------ | ----------------------------------- |
| **mongos(路由 router)** | :left_right_arrow: | **数据库服务器(Config server)...**  |
|                         | :left_right_arrow: | **分片数据(Shard Data) ...**        |



#### 丰富性

除了常见的增删改查，MongoDB还提供其他丰富的功能：

* **索引**：MongoDB支持二级索引，提供独特、复合、地理空间和全文检索功能。还支持层次结构(嵌套文档和数组)上的二级索引。

  > 二级索引是指根据数据中的某个字段再次进行排序，你可以把数据库想象成一本新华词典，该词典收录了几十万个汉字，为了方便快速找到某个汉字，词典中对同一个汉字又创建了 2个 不同维度的索引：按拼音首字母查询、按部首查询
  > 对于MongoDB数据库来说，除了使用 _id 来依次储存数据之外(即默认排序方式)，还可以按照文档某个字段来作为二级索引，方便快速从集合中查找数据。至于二级索引究竟使用哪个字段(例如是按照拼音首字母排序，还是按照部首排序)，这个要根据实际项目需求来确定。

* **聚合**：MongoDB提供基于数据处理管道概念的聚合查询，通过一系列相对简单、阶段性的数据操作来构建复杂的数据操作。

  > 就是把一个复杂的数据操作，拆分成若干个简单的数据操作

* **特殊集合和索引类型**：MongoDB支持将在某个时间过期的数据的生存时间集合，和部分索引(仅限于符合匹配条件的文档)。

* **文件存储**：MongoDB支持一个 易于使用的协议来储存数据文件。

  > 例如 MongoDB 支持 Javascript 的语法来储存操作数据



#### 高性能

高性能是MongoDB的一个产品设计驱动目标。

> 具体怎么实现了高性能，暂时就不用深究，只需要知道 MongoDB 处理数据性能很高即可。



## 1.2 开始探索

MongoDB 使用简单却强大的 MongoShell 命令来执行各种操作管理。同时 MongoShell 也可以执行 JavaScript 命令，允许用户创建和执行自定义脚本。

MongoDB属于文档型数据库，主要由以下几部分组成：

1. 文档(Document)
2. 集合(Collections)
3. 数据库(Databases)



#### 文档(Document)

文档是 MongoDB 最基础的组成单位，文档是一组有序的键(key)和值(value)。
例如：{ "greeting" : "Hello, world!" }

> 键(key)：键名
> 值(value)：键值
> 说直白点，MongoDB 的文档是 JSON 的形式

键(key)可以是任意的 UTF-8 字符串，但有几个点除外：

1. 一个文档中键 (key)不能出现2次
2. 键(key)不能包含 \0 (thu null character)
3. 不能包含 . 或 $ 符号

> 不要包含除下划线(_)以外的其他特殊符号、不建议以数字开头

**MongoDB的键(key)名区分大小写**，例如：{“count”:5} 和 {"Count":5} 是不一样的

同时，**MongoDB的键值(value)区分是否加引号**，例如：{'"count":5} 和 {"count":"5"} 是不一样的



#### 集合(Collections)

一组或很多个文档构成一个集合。集合拥有以下特性：

**动态架构、动态模式**

同一个集合中的不同文档，可以拥有完全不相同的数据结构。例如同一个集合中的 2 个文档，完全可以使用不同的键名：

{  "greeting" : "Hello, World!" } {  "slogin" : "挺住 TikTok !" }

不光是键(key)名可以不一样，键值类型、键的数量都可以完全不一样。

> MongoDB是非关系数据库中，最像关系数据的数据库

**集合命名规则**

集合名可以是任意的 UTF-8 字符串，但有几点除外：

1. 不允许使用空字符串(空格字符串)，例如 “”、"    " 都不被允许使用
2. 不能包含 \0 (thu null character)
3. 不能以 system. 作为集合名的开头，因为 system. 是 MongoDB 为集合操作保留的关键词，例如 system.users 为数据库用户相关信息、system.namespaces 为所有集合相关信息。
4. 不能包含 $ 符号

> 不要包含除下划线(_)以外的其他特殊符号、不建议以数字开头



#### 数据库(Databases)

0个或多个集合构成一个数据库。通常建议将一个项目的所有数据集合都存放在同一个数据库中。

**数据库命名规则**

数据库名可以是任意的 UTF-8 字符串，但有几点需要注意：

1. 不允许使用空字符串(空格字符串)，例如 “”、"    " 都不被允许使用
2. 不允许使用 /、\\、.、"、*、<、>、:、|、?、$ 或  \0 (thu null character)
3. 数据库名不区分大小写
4. 数据库名最大限制为64字节
5. MongoDB 默认自带的数据库，例如：admin、local、config、test 等





